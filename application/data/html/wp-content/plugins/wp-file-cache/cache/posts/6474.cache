O:8:"stdClass":25:{s:2:"ID";i:6474;s:11:"post_author";s:1:"1";s:9:"post_date";s:19:"2012-07-27 17:21:53";s:13:"post_date_gmt";s:19:"2012-07-27 08:21:53";s:12:"post_content";s:4849:"<p>
WordPress に記事を投稿する場合は、WordPress の管理画面から投稿するか、Mac であれば <a href="http://click.linksynergy.com/fs-bin/stat?id=cSxHJqdiAjg&offerid=94348&type=3&subid=0&tmpid=2192&RD_PARM1=http://itunes.apple.com/jp/app/marsedit-blog-editor-for-wordpress/id402376225?mt=12&uo=4" target="_blank">MarsEdit</a> のようなブログエディタから投稿できます。<br>
<br>
それらを使わずに、記事を投稿するには XML-RPC というのを利用すれば良いみたい。ってか、<a href="http://click.linksynergy.com/fs-bin/stat?id=cSxHJqdiAjg&offerid=94348&type=3&subid=0&tmpid=2192&RD_PARM1=http://itunes.apple.com/jp/app/marsedit-blog-editor-for-wordpress/id402376225?mt=12&uo=4" target="_blank">MarsEdit</a> のようなブログエディタも XML-RPC を利用して記事を投稿しています。<br>
<br>
XML-RPC の仕様はたった2ページしかないようでとてもシンプルな仕組みになってます。<br>
<br>
参考：<a href="http://lowlife.jp/yasusii/stories/9.html" target="_blank">XML-RPC 仕様書</a><br>
<br>
仕様書を読み込んで・・とすれば良いのでしょうが、ググったら XML-RPC を使って外部から投稿するサンプルプログラムがたくさんありましたので、それらを<s>パクって</s>参考にさせて頂きましょう。<br>
<br>
今回、以下のサイトを参考にさせてもらいました。<br>
<br>
参考：<a href="http://blog.syuhari.jp/archives/1373" target="_blank">[WordPress] XML-RPC を使用する方法 | Sun Limited Mt.</a><br>
参考：<a href="http://blog.livegoods.net/archives/wordpress-xml-rpc-post/" target="_blank">WordPress内からXML-RPCを利用して記事投稿を行う方法 | WordPress攻略本</a><br>
<br>
とくに、<a href="http://www.multiburst.net/sometime-php/2009/04/newpost-with-wordpress-xmlrpc-api/" target="_blank">[PHP] XML-RPCを使ってWordPressに投稿する - Sometime PHP</a> さんのサンプルコードは大いに<s>パクらせて</s>参考にさせてもらいました。Thanx!!<br>
<br>
基本的にはそのまま動きます。<br>
<br>
とにかく、以下の部分が投稿する記事をつくっている部分みたいなので、
</p>

<blockquote>
$content = new XML_RPC_Value(<br>
　　array(<br>
　　　　'title' => new XML_RPC_Value($title, 'string'),<br>
　　　　'categories' => new XML_RPC_Value($categories, 'array'),<br>
　　　　'description' => new XML_RPC_Value($description, 'string'),<br>
　　　　'wp_slug' => new XML_RPC_Value('bookmarks-of-'.date('Yms'),'string'),<br>
　　　　'dateCreated' => new XML_RPC_Value(time(), 'dateTime.iso8601')<br>
　　), 'struct');<br>
</blockquote>

<p>
XML_RPC_Value オブジェクトの引数で渡す連想配列に、記事タイトルだとか、記事カテゴリだとかを入れれば良いみたい。<br>
<br>
例えば、複数のカテゴリを指定したい場合は、上記 $categories が配列なので、$categories に、
</p>

<blockquote>
$categories = array_push( $categories, new XML_RPC_Value( "カテゴリ名1", "string") );<br>
$categories = array_push( $categories, new XML_RPC_Value( "カテゴリ名2", "string") );<br>
$categories = array_push( $categories, new XML_RPC_Value( "カテゴリ名3", "string") );
</blockquote>

<p>
こんな感じで、追加していけばOK。<br>
<br>
また、日付（dateCreated）は、「 20120726T00:00:00 」（yyyymmddThh:mm:ss）の形式で渡してあげる。<br>
<br>
以下、その他、一発でうまくいかなかった事などもろもろ。<br>
<br>
ホスト名はトップページ（ホームページ）アドレスでOK。例えばこのブログの場合、<br>
</p>

<blockquote>
$host = "dev.ontheroad.jp";
</blockquote>

<p>
http:// とかはなしで。<br>
<br>
ホストのアドレス（$xmlrpc_path の値）は、"/xmlrpc.php"。<br>
</p>

<blockquote>
$xmlrpc_path = "/xmlrpc.php";
</blockquote>

<p>
あとは、PEAR の XML_PRC をインクルード（require_once）する必要がありますが、インクルードするファイルは、以下からダウンロードできます。<br>
<br>
ダウンロード：<a href="http://pear.php.net/package/XML_RPC/download" target="_blank">XML_RPC</a><br>
<br>
解凍したら中にある XML というフォルダを 上記サイトを参考に作ったファイルと同じ階層にアップロードすればOK。<br>
<br>
そうすると、
</p>

<blockquote>
require_once("XML/RPC.php");
</blockquote>

<p>
で、無事にインクルード（require_once）できます。<br>
<br>
ってことで、意外と簡単にできちゃいました。そりゃそーだ。<br>
<br>
でわでわ。
</p>";s:10:"post_title";s:76:"WordPress に XML-RPC を使って、外部から記事を投稿してみた";s:12:"post_excerpt";s:193:"<!--:ja-->ちょっと、いろいろあって、WordPress の外部から記事を投稿したくなったので、調べたら XML-RPC という仕組みを使えば良いそうな。<!--:-->";s:11:"post_status";s:7:"publish";s:14:"comment_status";s:4:"open";s:11:"ping_status";s:4:"open";s:13:"post_password";s:0:"";s:9:"post_name";s:190:"wordpress-%e3%81%ab-xml-rpc-%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%e3%80%81%e5%a4%96%e9%83%a8%e3%81%8b%e3%82%89%e8%a8%98%e4%ba%8b%e3%82%92%e6%8a%95%e7%a8%bf%e3%81%97%e3%81%a6%e3%81%bf%e3%81%9f";s:7:"to_ping";s:0:"";s:6:"pinged";s:177:"http://blog.livegoods.net/archives/wordpress-xml-rpc-post/
http://www.multiburst.net/sometime-php/2009/04/newpost-with-wordpress-xmlrpc-api/
http://blog.syuhari.jp/archives/1373";s:13:"post_modified";s:19:"2012-07-27 19:34:39";s:17:"post_modified_gmt";s:19:"2012-07-27 10:34:39";s:21:"post_content_filtered";s:0:"";s:11:"post_parent";i:0;s:4:"guid";s:31:"http://dev.ontheroad.jp/?p=6474";s:10:"menu_order";i:0;s:9:"post_type";s:4:"post";s:14:"post_mime_type";s:0:"";s:13:"comment_count";s:1:"0";s:9:"ancestors";a:0:{}s:6:"filter";s:3:"raw";}